#
# Copyright (c) 2020 by Yann39.
#
# This file is part of Chachatte Team application.
#
# Chachatte Team is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# Chachatte Team is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
## You should have received a copy of the GNU General Public License
# along with Chachatte Team. If not, see <http://www.gnu.org/licenses/>.
#

schema {
    query: Query
    mutation: Mutation
}

# java.time.LocalDateTime implementation
scalar LocalDateTime

type Query {
    allNews: [News]
    newsById(id: Int!): News

    allEvents: [Event]
    eventById(id: Int!): Event
    eventsByTitle(title: String!): [Event]

    allMembers: [Member]
    memberById(id: Int!): Member
    memberByEmail(email: String!): Member
    membersFiltered(text: String): [Member]
}

type Mutation {
    newNews(title: String!, catchLine: String!, content: String!, newsDate: String!): News
    likeNews(newsId: Int!, memberId: Int!): News
    unlikeNews(newsId: Int!, memberId: Int!): News

    newEvent(title: String!, description: String!): Event

    newMember(firstName: String!, lastName: String!, email: String!, password: String!): Member
}

type Event {
    id: ID!
    title: String!
    description: String
    startDate: LocalDateTime!
    endDate: LocalDateTime!
    track: Track
    organizer: String
    price: Float
    members: [Member]
    createdOn: LocalDateTime!
    createdBy: Member!
    modifiedOn: LocalDateTime
    modifiedBy: Member
}

type EventMember {
    id: ID!
    member: Member!
    event: Event!
    createdOn: LocalDateTime!
}

type Gallery {
    id: ID!
    title: String!
    description: String
    createdOn: LocalDateTime!
    modifiedOn: LocalDateTime
}

type LapRecord {
    id: ID!
    track: Track!
    member: Member
    lapTime: Int!
    recordDate: LocalDateTime!
    conditions: String!
    comments: String
    createdOn: LocalDateTime!
    modifiedOn: LocalDateTime
}

type LikedNews {
    id: ID!
    member: Member
    news: News!
    createdOn: LocalDateTime!
}

type Member {
    id: ID!
    firstName: String!
    lastName: String!
    email: String!
    password: String!
    phone: String
    avatarUrl: String
    bike: String
    active: Boolean!
    admin: Boolean!
    registrationDate: LocalDateTime!
    createdOn: LocalDateTime!
    modifiedOn: LocalDateTime
}

type News {
    id: ID!
    title: String!
    catchLine: String!
    content: String!
    newsDate: LocalDateTime
    likedMembers: [Member]
    createdOn: LocalDateTime!
    createdBy: Member!
    modifiedOn: LocalDateTime
    modifiedBy: Member
}

type Photo {
    id: ID!
    title: String!
    description: String
    link: String!
    gallery: Gallery!
    createdOn: LocalDateTime!
    modifiedOn: LocalDateTime
}

type Track {
    id: ID!
    name: String!
    distance: Int
    lapRecord: Int
    website: String
    latitude: Float
    longitude: Float
}

